#include <iostream>
#include <string>
#include <map>
#include <fstream>
#include <cassert>

using namespace std;



bool isIsomorphicStr(const string& str1, const string& str2) {
    if (str1.length() != str2.length()) return false;

    map<char, char> mapping1; // 48 + 2n байт (в худшем случае)
    map<char, char> mapping2; // 48 + 2n байт (в худшем случае)

    for (int i = 0; i < str1.length(); i++) {
        char char1 = str1[i]; // 1 байт
        char char2 = str2[i]; // 1 байт

        if (mapping1.find(char1) == mapping1.end() && mapping2.find(char2) == mapping2.end()) {
            mapping1[char1] = char2;
            mapping2[char2] = char1;
        } else if (mapping1[char1] != char2 || mapping2[char2] != char1) {
            return false;
        }
    }

    return true;
}

void test_isomorphic() {
    assert(isIsomorphicStr("aba","bab"));
    assert(!isIsomorphicStr("acd","xxs"));
    assert(!isIsomorphicStr("aaaaaaaaaa","bbbbbbbbb"));
    assert(isIsomorphicStr("ababababab", "bababababa"));
    assert(isIsomorphicStr("x031bd","c451nf"));
    assert(!isIsomorphicStr("аьфф","цощщ"));
    assert(isIsomorphicStr("1234567890","0987654321"));
    assert(isIsomorphicStr("aMng","xByq"));
    assert(isIsomorphicStr("a041","xByq"));
    std::cout << "OK";

}

int main() {
    ifstream inputFile("dataset.txt");

    string word1, word2;
    while (inputFile >> word1 >> word2) {
        cout << word1 << " и " << word2 << " - ";
        if (isIsomorphicStr(word1, word2)) {
            cout << "Изоморфные" << endl;
        } else {
            cout << "Не изоморфные" << endl;
        }
    }
    test_isomorphic();

//    inputFile.close();
//    test_isomorphic();
//    string str1, str2;

//    cin >> str1 >> str2;
//    cout << isIsomorphicStr(str1, str2) << endl;
//    return 0;
}
